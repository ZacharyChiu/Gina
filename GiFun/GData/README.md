# GData模块

![](https://img.shields.io/badge/Language-Python-green.svg) ![](https://img.shields.io/badge/Type-File_Manage-lightgrey.svg)

## 概述

* 本模块负责对具体文件的分析与处理工作。
* 包含以下几大板块
  * 文件分类
  * 数据采集
  * 文件分析
* **已实现**
  * [x] Tags

---

## 函数介绍

### 1. [ Tags ]

> 基于文件名而建立的**标签系统**。
>
> 允许对大量文件的标签按照**交集**、**并集**、**补集**的算法进行筛选。为避免文件数量庞大时，提取符合条件的文件过慢，这里使用快捷方式来预览筛选结果。

#### 目前的问题

* **编号系统**在遇到重复编号的情况下崩溃

* 排除模式会出现前列标签排除后，**后续标签不存在**于剩余文件中，导致`list out of range...`报错。

* Windows端图片浏览器（我使用的是2345）查看图片的排序依据为快捷方式的源文件夹，因此**无法连续查看**筛选出的图片集，只能看预览图。

  > 目前使用基于pygame的PicFlow来连续查看筛选图片，但pygame的图片缩放效果极差，图片锯齿化严重。

#### 功能

* **筛选**

  * 交集模式（+）

    筛选：`A.B.C. ...`

    结果：文件标签包含A，且包含B，且包含C，且...

  * 补集模式（-）

    筛选：`A.B.C. ...`

    结果：文件标签不包含A，且不包含B，且不包含C，...

  * 并集模式（/）

    筛选：`A.B.C. ...`

    结果：文件标签包含A、B、C...中的任何一个（或多个）

  * 长宽比筛选（sq）

    横向图片 - m；竖向图片 - l；方形图片 - o

  * 提取全部（all）

* **标签编辑**
  * `new` ：为所有缓存文件夹中的文件新增标签
  * `cut` ：为所有缓存文件夹中的文件删除指定标签
  * `fff` ：在不改变已存在文件编号的情况下，给未编号的文件编号
  * `set` ：处理单个文件中的重复标签，并将标签按首字母升序排序
* **统计**
  * `at` ：统计所有出现过的标签
  * `info` ：统计源文件夹的大小、文件数、对立标签比例等
  * `@` ：统计符合要求（交集模式）的文件的个数
  * `same` ：基于Hash值对源文件夹的文件进行查重

* **文件迁移管理**
  * `op`  ：打开源图片文件夹
  * `opc` ：打开缓存文件夹
  * `path` ：打开代码所在文件夹
  * `cg` ：修改缓存文件夹路径
  * `c` ：清空当前的缓存文件夹
  * `call` ：清空所有缓存文件夹
  * `get` ：基于缓存文件夹内容，将筛选结果复制到【get】文件夹中
  * `webp` ：专门针对webp文件，将webp文件从源文件夹剪切出来，格式转换为常用格式后再放回去
* **数据可视化**
  * `pi` ：将标签进行分组，统计关联标签的分布比例并画出饼状图

* **关联文件**

  开发中...

